# 温度系数

* 大语言模型中的 “温度”(temperature) 参数可以控制生成文本的`随机性和多样性`。`temperature 的值越大，语言模型输出的多样性越大`；temperature 的值越小，输出越倾向高概率的文本。


* 温度（temperature）参数可以控制语言模型生成文本的随机性。`温度为0时`，每次使用`同样的 Prompt`，`得到的结果总是一致的`。而在上面的样例中，当温度设为0.7时，则每次执行都会生成不同的文本。

```ipynb
import os

from openai import OpenAI
from dotenv import load_dotenv
# 表格是以 HTML 格式呈现的，加载出来
from IPython.display import display, HTML

# 加载 .env 文件
load_dotenv()

client = OpenAI(
    # 若没有配置环境变量，请用百炼API Key将下行替换为：api_key="sk-xxx",
    api_key=os.getenv("DASHSCOPE_API_KEY"),  # 如何获取API Key：https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
)

# 我们可以在推理那章学习到如何对一个评论判断其情感倾向
sentiment = "消极的"

# 一个产品的评价
review = f"""
他们在11月份的季节性销售期间以约49美元的价格出售17件套装，折扣约为一半。\
但由于某些原因（可能是价格欺诈），到了12月第二周，同样的套装价格全都涨到了70美元到89美元不等。\
11件套装的价格也上涨了大约10美元左右。\
虽然外观看起来还可以，但基座上锁定刀片的部分看起来不如几年前的早期版本那么好。\
不过我打算非常温柔地使用它，例如，\
我会先在搅拌机中将像豆子、冰、米饭等硬物研磨，然后再制成所需的份量，\
切换到打蛋器制作更细的面粉，或者在制作冰沙时先使用交叉切割刀片，然后使用平面刀片制作更细/不粘的效果。\
制作冰沙时，特别提示：\
将水果和蔬菜切碎并冷冻（如果使用菠菜，则轻轻煮软菠菜，然后冷冻直到使用；\
如果制作果酱，则使用小到中号的食品处理器），这样可以避免在制作冰沙时添加太多冰块。\
大约一年后，电机发出奇怪的噪音，我打电话给客服，但保修已经过期了，所以我不得不再买一个。\
总的来说，这些产品的总体质量已经下降，因此它们依靠品牌认可和消费者忠诚度来维持销售。\
货物在两天内到达。
"""

prompt = f"""
你是一位客户服务的AI助手。
你的任务是给一位重要客户发送邮件回复。
根据客户通过“```”分隔的评价，生成回复以感谢客户的评价。提醒模型使用评价中的具体细节
用简明而专业的语气写信。
作为“AI客户代理”签署电子邮件。
客户评论：
```{review}```
评论情感：{sentiment}
"""

completion = client.chat.completions.create(
    model="deepseek-v3",  # 模型. deepseek-v3没有思考过程，直接给出答案; deepseek-r1会给出思考过程
    messages=[
        {'role': 'user', 'content': prompt}
    ],
    temperature=0.7
)

response = completion.choices[0].message.content

display(HTML(response))
```

```text
**主题：感谢您的反馈与支持** 尊敬的客户， 感谢您抽出宝贵时间分享您对我们产品的详细评价。我们非常重视每一位客户的反馈，您的意见对我们持续改进产品和服务至关重要。 我们注意到您在评论中提到的几个关键点： 1. **价格波动**：您提到在11月份的季节性销售期间，17件套装的价格约为49美元，但到了12月第二周，价格涨至70美元到89美元不等。我们理解价格波动可能给您带来不便，并会对此进行内部审查，以确保我们的定价策略透明且合理。 2. **产品质量**：您指出基座上锁定刀片的部分不如早期版本，并且电机在一年后出现噪音。我们对此表示歉意，并将这些反馈传达给我们的产品开发团队，以便在未来的产品中改进这些方面。 3. **使用建议**：感谢您分享的详细使用技巧，特别是在制作冰沙和果酱时的建议。这些实用的提示不仅对我们改进产品设计有帮助，也可能对其他客户有所启发。 4. **客户服务**：我们了解到您在保修期后遇到问题，并不得不再次购买产品。我们深感抱歉，并会重新评估我们的保修政策，以确保更好地支持我们的客户。 我们承诺会认真对待您的反馈，并努力提升产品质量和客户服务体验。如果您有任何进一步的问题或需要帮助，请随时与我们联系。 再次感谢您的支持与理解。 此致， **AI客户代理**
```

```text
**主题：感谢您的反馈与宝贵意见** 尊敬的客户， 感谢您抽出时间分享您对我们产品的详细评价。我们非常重视每一位客户的反馈，您的意见对我们持续改进产品和服务至关重要。 我们注意到您在11月份的季节性销售期间购买了17件套装，并享受了约一半的折扣。然而，到了12月第二周，价格有所上涨，这给您带来了不便。我们理解您的担忧，并会对此进行内部审查，以确保我们的定价策略透明且公平。 关于您提到的基座上锁定刀片的部分不如早期版本，我们深感抱歉。我们一直在努力提升产品质量，您的反馈将帮助我们进一步改进设计。同时，我们很高兴看到您在使用产品时采取了细致的步骤，如先研磨硬物再制作所需份量，以及制作冰沙时的特别提示。这些技巧不仅有助于延长产品寿命，也能提升使用体验。 我们遗憾地得知您的电机在一年后出现了噪音问题，且保修已过期。我们理解这给您带来了不便，并会考虑如何更好地支持我们的客户，即使在保修期外。 再次感谢您的诚实反馈。我们将继续努力提升产品质量和服务水平，以确保每一位客户都能获得满意的体验。如果您有任何进一步的问题或需要帮助，请随时与我们联系。 祝您一切顺利！ 此致， **AI客户代理**
```